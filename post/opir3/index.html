<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title> Python ile Orange Pi İr Kullanımı &middot; #Yasin Güler# </title>


<link rel="stylesheet" href="https://yasngleer.github.io/css/slim.css">
<link rel="stylesheet" href="https://yasngleer.github.io/css/highlight.min.css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600&subset=latin,latin-ext' rel='stylesheet'>

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/favicon.ico">




</head>

<body>
  <div class="container">
    <div class="header">
  <h1 class="site-title"><a href="https://yasngleer.github.io">#Yasin Güler#</a></h1>
  <p class="site-tagline"></p>
  <div class="nav">
    <a class="nav-btn" href="#">
      <span class="ci ci-burger"></span>
    </a>
    <ul class="nav-list">
       
	  <li class="spacer">&ac;</li>
  
    </ul>
  </div>
</div>
    <div class="content">
      <div class="posts">
        <div class="post">
          <h2 class="post-title"><a href="https://yasngleer.github.io/post/opir3/">Python ile Orange Pi İr Kullanımı</a></h2>
          <span class="post-date">Jul 15, 2017 </span>
          <div class="post-content">
            

<h3 id="sunxi-cir-modülünü-yüklüyoruz">sunxi_cir modülünü yüklüyoruz.</h3>

<pre><code>modprobe sunxi_cir
</code></pre>

<p>Aşağıdaki komut ile ir alıcımızı test edebiliriz.</p>

<pre><code>mode2 -d /dev/lirc0
</code></pre>

<p>Kumandamızı ir alıcısna doğru yöneltip tuşlara bastığımızda aşağıdaki gibi bir çıktı alıyorsak ir alıcısı çalışıyor demektir.</p>

<pre><code>space 16777215
pulse 9008
space 4480
pulse 608
space 552
pulse 584
</code></pre>

<p>sunxi_cir modülünün her açılışta otomatik olarak yüklenmesi için /etc/lirc/hardware.conf dosyasının içindekileri silip aşağıdakileri yapıştırın.</p>

<pre><code>REMOTE_MODULES=&quot;sunxi_cir&quot;
REMOTE_DEVICE=&quot;/dev/lirc0&quot;
REMOTE_LIRCD_CONF=&quot;&quot;
REMOTE_LIRCD_ARGS=&quot;&quot;

#Enable lircd
START_LIRCD=&quot;true&quot;

#Try to load appropriate kernel modules
LOAD_MODULES=&quot;true&quot;
DRIVER=&quot;default&quot;
DEVICE=&quot;/dev/lirc0&quot;
MODULES=&quot;sunxi-cir&quot;

# Default configuration files for your hardware if any
LIRCMD_CONF=&quot;&quot;

#to leave this set to &quot;false&quot;
FORCE_NONINTERACTIVE_RECONFIGURATION=&quot;false&quot;
START_LIRCMD=&quot;&quot;
</code></pre>

<h3 id="artık-kumandamızın-tuşlarına-isim-atayabiliriz">Artık kumandamızın tuşlarına isim atayabiliriz.</h3>

<p>Aşağıdaki komut ile tuşlara verebileceğimiz isimleri görüntüleyebiliriz.</p>

<pre><code>irrecord --list-namespace
</code></pre>

<p>Kullanmak istediğiniz isimleri bir kenara yazmakta fayda var.
Aşağıdaki komut ile hangi tuşun hangi ismi çağıracağını ayralayabiliriz.</p>

<pre><code>irrecord -d /dev/lirc0 ~/lircd.conf
  Press RETURN to continue. # enter
  Press RETURN now to start recording.#enter
  #kumandanızdaki kullanmak isytediğiniz tuşlara 2 sıra doluncaya kadar basın
  Please enter the name for the next button (press &lt;ENTER&gt; to finish recording)
  KEY_UP
  Now hold down button &quot;KEY_UP&quot;.
  #işlem bittiğinde entere basarak sonlandırın
</code></pre>

<p>Tuşlara isim atamayı bitirdikten sonra aşağıdaki komutları sırasıyla çalıştırın.</p>

<pre><code>sudo cp ~/lircd.conf /etc/lirc/lircd.conf
sudo /etc/init.d/lirc stop
sudo /etc/init.d/lirc start
</code></pre>

<p>Yaptığımız işlemlerin çalıştığından emin olmak için aşağıdaki komutu çalıştırın.</p>

<pre><code>irw
</code></pre>

<p>Kumandadan isim atadığınız tuşları deneyin bastığınız tuşun isminin çıktıda görünmesi gerekir.</p>

<h3 id="artık-python-kısmına-geçebiliriz">Artık python kısmına geçebiliriz.</h3>

<ul>
<li><p>python2.7 kullanıyorsanız</p>

<p>wget <a href="https://github.com/tompreston/python-lirc/releases/download/v1.2.1/python-lirc_1.2.1-1_armhf.deb">https://github.com/tompreston/python-lirc/releases/download/v1.2.1/python-lirc_1.2.1-1_armhf.deb</a>
dpkg -i python-lirc_1.2.1-1_armhf.deb</p></li>

<li><p>python3 kullanıyorsanız</p>

<p>wget <a href="https://github.com/tompreston/python-lirc/releases/download/v1.2.1/python3-lirc_1.2.1-1_armhf.deb">https://github.com/tompreston/python-lirc/releases/download/v1.2.1/python3-lirc_1.2.1-1_armhf.deb</a>
dpkg -i python3-lirc_1.2.1-1_armhf.deb</p></li>
</ul>

<p>Lirc kütüphanesini kurduktan sonra python ile haberleştirebilmek için ~/.lircrc dosyasını oluşturup</p>

<pre><code>  leafpad ~/.lircrc
</code></pre>

<p>ile veya herhangi bir editörle açıyoruz.
Ben kumandamın sadece iki tuşunu isimlendirdim biri KEY_UP diğeri KEY_DOWN</p>

<pre><code>    begin
        prog = myprogram
        button = KEY_UP
        config = yukari
    end

    begin
        prog = myprogram
        button = KEY_DOWN
        config = asagi
    end
</code></pre>

<p>her tuş için begin ile başlayp end ile biten bir tanımlama yapmalıyız</p>

<p>prog =  bu kısımın tüm tanımlamalarda aynı olması gerekir herhangi bir değer verin</p>

<p>button = önceki adımlarda tuşa verdiğiniz değeri yazın</p>

<p>config = python dan tuşu kullanırken kullanacağımız değer herhangi bir değer verin</p>

<h4 id="örnek-python-kodu">Örnek python kodu:</h4>

<pre><code>#!/usr/bin/env python
#coding: utf8

import lirc
import time
import os

sockid=lirc.init(&quot;myprogram&quot;)

while True:
  codeIR = lirc.nextcode()
  print codeIR
  if codeIR != []:
    if codeIR[0] == &quot;yukari&quot;:
      print &quot;yukari tusuna bastınız&quot;
    elif codeIR[0] == &quot;asagi&quot;:
      print &quot;yukari tusuna bastınız&quot;
</code></pre>

<h2 id="kaynak-http-codelectron-com-how-to-setup-infrared-remote-control-in-orange-pi-zero-using-lircd-and-python-kaynak">!!KAYNAK!! <a href="http://codelectron.com/how-to-setup-infrared-remote-control-in-orange-pi-zero-using-lircd-and-python/">http://codelectron.com/how-to-setup-infrared-remote-control-in-orange-pi-zero-using-lircd-and-python/</a> !!KAYNAK!!</h2>

          </div>
        </div>
        <div class="pagination"> 
        </div>
      </div>
    </div>
    <div class="footer">
  <p>Powered by <a href="http://gohugo.io">Hugo</a>. This theme—Slim—is open sourced on <a href="https://github.com/zhe/hugo-theme-slim">Github</a>.</p>
</div>

  </div>
  <script src="https://yasngleer.github.io/js/slim.js"></script>
  <script src="https://yasngleer.github.io/js/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
</body>

</html>
